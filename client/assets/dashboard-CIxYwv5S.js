import{e as D,t as F,c as g,w as X,r as Z}from"./utils-U4k8zN-U.js";import{r as u,j as e,u as ee,L as te}from"./chunk-GNGMS2XR-BTyGsKOQ.js";import{F as _,d as U,L as x,e as p,I as v,E as h,c as se,a as C}from"./index.esm-BgvrQcmk.js";import{a as ae,T as V,u as ne,A as re,C as oe}from"./content-list.component-Kc1_JmCm.js";import{B as j,P as y}from"./QueryClientProvider-Qv7QOnvw.js";import{E as k,C as N,a as T,b as w,c as S,d as I}from"./api.actions-R6WKCUBF.js";import{u as ie}from"./use-post.hook-BcJdfVOy.js";import{q as $,u as ce,a as de,b as le,d as B,R as ue,I as me,e as L,P as xe}from"./root-jjRQpyTZ.js";import{Q as M,u as pe}from"./query-keys-DFoA7pJ2.js";import{c as he}from"./query-pBzLrsWh.js";import{u as fe,a as be}from"./hook-D_gVsVG3.js";import{b as ve,r as je}from"./userSlice-DzMmQd_y.js";import"./mutation-D0SRK0Pe.js";import"./routes-B6W59PFx.js";function ge(){const[t,s]=u.useState(!1),{mutate:i,isPending:a}=ie({url:k.contents(),options:{onSuccess:()=>{F.success("Content added successfully"),$.invalidateQueries({queryKey:[M.getContents]})},onError:D}}),r=async(o,{resetForm:n})=>{s(!0);try{i(o),n()}catch{F("Error adding content")}finally{s(!1)}};return e.jsx(_,{initialValues:{title:"",description:"",youtubeLink:""},validationSchema:ae,onSubmit:r,children:()=>e.jsxs(U,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"title",children:"Title"}),e.jsx(p,{as:v,id:"title",name:"title",placeholder:"Content title"}),e.jsx(h,{name:"title",component:"div",className:"text-sm text-destructive"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"description",children:"Description"}),e.jsx(p,{as:V,id:"description",name:"description",placeholder:"Describe your content",rows:4}),e.jsx(h,{name:"description",component:"div",className:"text-sm text-destructive"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"youtubeLink",children:"YouTube URL"}),e.jsx(p,{as:v,id:"youtubeLink",name:"youtubeLink",placeholder:"https://youtube.com/watch?v=..."}),e.jsx(h,{name:"youtubeLink",component:"div",className:"text-sm text-destructive"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter a valid YouTube video URL (e.g., https://youtube.com/watch?v=abcdefghijk or https://youtu.be/abcdefghijk)"})]}),e.jsx(j,{type:"submit",disabled:t||a,children:t||a?"Adding...":"Add Content"})]})})}const ye=()=>{const{data:t,isLoading:s}=pe({url:k.userInfo(),options:{queryKey:[M.getUserInfo],refetchOnMount:!0,refetchOnWindowFocus:!1}}),{mutate:i,isPending:a}=ne({url:k.userInfo(),options:{onSuccess:()=>{$.invalidateQueries({queryKey:[M.getUserInfo]}),F.success("Profile updated successfully")},onError:D}});return{user:t,isLoadingUser:s,updateUser:i,isUpdating:a}},Ce=se().shape({username:C().required("Name is required").min(2,"Name must be at least 2 characters"),bio:C().max(500,"Bio must be less than 500 characters"),website:C().url("Must be a valid URL")});function Ne(){const{user:t,isLoadingUser:s,updateUser:i,isUpdating:a}=ye();if(s)return e.jsx("div",{children:"Loading profile..."});if(!t)return e.jsx("div",{children:"Profile not found"});const r=o=>{i(o)};return e.jsx(_,{initialValues:{username:t.username||"",bio:t.bio||"",website:t.website||""},validationSchema:Ce,onSubmit:r,enableReinitialize:!0,children:()=>e.jsxs(U,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"username",children:"Name"}),e.jsx(p,{as:v,id:"username",name:"username",placeholder:"Your name"}),e.jsx(h,{name:"username",component:"div",className:"text-sm text-destructive"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"bio",children:"Bio"}),e.jsx(p,{as:V,id:"bio",name:"bio",placeholder:"Tell us about yourself",rows:4}),e.jsx(h,{name:"bio",component:"div",className:"text-sm text-destructive"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"website",children:"Website"}),e.jsx(p,{as:v,id:"website",name:"website",placeholder:"https://example.com"}),e.jsx(h,{name:"website",component:"div",className:"text-sm text-destructive"})]}),e.jsx(j,{type:"submit",disabled:a,children:a?"Saving...":"Save Changes"})]})})}var E="Tabs",[Te,ze]=he(E,[B]),q=B(),[we,R]=Te(E),G=u.forwardRef((t,s)=>{const{__scopeTabs:i,value:a,onValueChange:r,defaultValue:o,orientation:n="horizontal",dir:l,activationMode:f="automatic",...b}=t,d=ce(l),[c,m]=de({prop:a,onChange:r,defaultProp:o});return e.jsx(we,{scope:i,baseId:le(),value:c,onValueChange:m,orientation:n,dir:d,activationMode:f,children:e.jsx(y.div,{dir:d,"data-orientation":n,...b,ref:s})})});G.displayName=E;var K="TabsList",O=u.forwardRef((t,s)=>{const{__scopeTabs:i,loop:a=!0,...r}=t,o=R(K,i),n=q(i);return e.jsx(ue,{asChild:!0,...n,orientation:o.orientation,dir:o.dir,loop:a,children:e.jsx(y.div,{role:"tablist","aria-orientation":o.orientation,...r,ref:s})})});O.displayName=K;var z="TabsTrigger",H=u.forwardRef((t,s)=>{const{__scopeTabs:i,value:a,disabled:r=!1,...o}=t,n=R(z,i),l=q(i),f=W(n.baseId,a),b=J(n.baseId,a),d=a===n.value;return e.jsx(me,{asChild:!0,...l,focusable:!r,active:d,children:e.jsx(y.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":b,"data-state":d?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:f,...o,ref:s,onMouseDown:L(t.onMouseDown,c=>{!r&&c.button===0&&c.ctrlKey===!1?n.onValueChange(a):c.preventDefault()}),onKeyDown:L(t.onKeyDown,c=>{[" ","Enter"].includes(c.key)&&n.onValueChange(a)}),onFocus:L(t.onFocus,()=>{const c=n.activationMode!=="manual";!d&&!r&&c&&n.onValueChange(a)})})})});H.displayName=z;var Q="TabsContent",Y=u.forwardRef((t,s)=>{const{__scopeTabs:i,value:a,forceMount:r,children:o,...n}=t,l=R(Q,i),f=W(l.baseId,a),b=J(l.baseId,a),d=a===l.value,c=u.useRef(d);return u.useEffect(()=>{const m=requestAnimationFrame(()=>c.current=!1);return()=>cancelAnimationFrame(m)},[]),e.jsx(xe,{present:r||d,children:({present:m})=>e.jsx(y.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":f,hidden:!m,id:b,tabIndex:0,...n,ref:s,style:{...t.style,animationDuration:c.current?"0s":void 0},children:m&&o})})});Y.displayName=Q;function W(t,s){return`${t}-trigger-${s}`}function J(t,s){return`${t}-content-${s}`}var Se=G,Ie=O,Le=H,Pe=Y;function Ae({className:t,...s}){return e.jsx(Se,{"data-slot":"tabs",className:g("flex flex-col gap-2",t),...s})}function Fe({className:t,...s}){return e.jsx(Ie,{"data-slot":"tabs-list",className:g("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...s})}function P({className:t,...s}){return e.jsx(Le,{"data-slot":"tabs-trigger",className:g("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function A({className:t,...s}){return e.jsx(Pe,{"data-slot":"tabs-content",className:g("flex-1 outline-none",t),...s})}function He({}){return[{title:"Dashboard | CSMBD Content Management"},{name:"description",content:"Welcome to CSMBD Content Management System"}]}const Qe=X(function(){const[s,i]=u.useState(!1),a=ee(),r=fe(),{user:o}=be(ve);if(s)return e.jsx("div",{className:"container mx-auto py-10",children:e.jsx("div",{className:"flex justify-center items-center h-[60vh]",children:e.jsx("p",{children:"Loading..."})})});const n=()=>{Z(),r(je()),a("/")};return e.jsxs("div",{className:"container mx-auto py-10 min-h-screen",children:[e.jsx(j,{asChild:!0,variant:"outline",className:"mb-6",children:e.jsxs(te,{to:"/",children:[e.jsx(re,{className:"mr-2 h-4 w-4"}),"Back to Home"]})}),e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Dashboard"}),e.jsx(j,{variant:"outline",onClick:n,children:"Sign Out"})]}),e.jsxs(Ae,{defaultValue:"profile",className:"w-full",children:[e.jsxs(Fe,{className:"grid w-full grid-cols-3",children:[e.jsx(P,{value:"profile",children:"Profile"}),e.jsx(P,{value:"content",children:"My Content"}),e.jsx(P,{value:"add-content",children:"Add Content"})]}),e.jsx(A,{value:"profile",className:"mt-6",children:e.jsxs(N,{children:[e.jsxs(T,{children:[e.jsx(w,{children:"Profile Information"}),e.jsx(S,{children:"Update your profile information here"})]}),e.jsx(I,{children:e.jsx(Ne,{})})]})}),e.jsx(A,{value:"content",className:"mt-6",children:e.jsxs(N,{children:[e.jsxs(T,{children:[e.jsx(w,{children:"My Content"}),e.jsx(S,{children:"Manage your content"})]}),e.jsx(I,{children:e.jsx(oe,{userId:o==null?void 0:o.id,isOwner:!0})})]})}),e.jsx(A,{value:"add-content",className:"mt-6",children:e.jsxs(N,{children:[e.jsxs(T,{children:[e.jsx(w,{children:"Add New Content"}),e.jsx(S,{children:"Add a new YouTube video to your profile"})]}),e.jsx(I,{children:e.jsx(ge,{})})]})})]})]})});export{Qe as default,He as meta};
