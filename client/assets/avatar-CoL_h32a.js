import{r as i,j as l}from"./chunk-GNGMS2XR-BTyGsKOQ.js";import{c as w,u as C,a as m}from"./query-pBzLrsWh.js";import{P as c}from"./QueryClientProvider-Qv7QOnvw.js";import{c as g}from"./utils-U4k8zN-U.js";var f="Avatar",[j,M]=w(f),[I,A]=j(f),p=i.forwardRef((a,t)=>{const{__scopeAvatar:n,...e}=a,[o,r]=i.useState("idle");return l.jsx(I,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:r,children:l.jsx(c.span,{...e,ref:t})})});p.displayName=f;var x="AvatarImage",R=i.forwardRef((a,t)=>{const{__scopeAvatar:n,src:e,onLoadingStatusChange:o=()=>{},...r}=a,d=A(x,n),s=_(e,r.referrerPolicy),u=C(v=>{o(v),d.onImageLoadingStatusChange(v)});return m(()=>{s!=="idle"&&u(s)},[s,u]),s==="loaded"?l.jsx(c.img,{...r,ref:t,src:e}):null});R.displayName=x;var S="AvatarFallback",L=i.forwardRef((a,t)=>{const{__scopeAvatar:n,delayMs:e,...o}=a,r=A(S,n),[d,s]=i.useState(e===void 0);return i.useEffect(()=>{if(e!==void 0){const u=window.setTimeout(()=>s(!0),e);return()=>window.clearTimeout(u)}},[e]),d&&r.imageLoadingStatus!=="loaded"?l.jsx(c.span,{...o,ref:t}):null});L.displayName=S;function _(a,t){const[n,e]=i.useState("idle");return m(()=>{if(!a){e("error");return}let o=!0;const r=new window.Image,d=s=>()=>{o&&e(s)};return e("loading"),r.onload=d("loaded"),r.onerror=d("error"),r.src=a,t&&(r.referrerPolicy=t),()=>{o=!1}},[a,t]),n}var b=p,h=L;function P({className:a,...t}){return l.jsx(b,{"data-slot":"avatar",className:g("relative flex size-8 shrink-0 overflow-hidden rounded-full",a),...t})}function F({className:a,...t}){return l.jsx(h,{"data-slot":"avatar-fallback",className:g("bg-muted flex size-full items-center justify-center rounded-full",a),...t})}export{P as A,F as a};
