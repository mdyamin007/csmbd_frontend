import{c as D,a as xe,b as C,P as I,e as m,f as he,h as me,g as ve,i as ye,F as je,D as De,q as L}from"./root-jjRQpyTZ.js";import{r as l,j as e}from"./chunk-GNGMS2XR-BTyGsKOQ.js";import{c as h,d as be,t as S,e as Ce}from"./utils-U4k8zN-U.js";import{E as N,C as Ne,a as Ee,b as _e,c as we,h as Re,d as Te,e as Ie}from"./api.actions-R6WKCUBF.js";import{u as z,c as Pe,a as E,F as ke,d as Me,L as _,e as w,I as $,E as R}from"./index.esm-BgvrQcmk.js";import{u as Oe,Q as T}from"./query-keys-DFoA7pJ2.js";import{P as y,l as P,m as Ae,B as v}from"./QueryClientProvider-Qv7QOnvw.js";import{c as Fe,b as Le}from"./query-pBzLrsWh.js";/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ct=D("arrow-left",Se);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],ze=D("pencil",$e);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],qe=D("trash",We);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ge=D("x",Be);function Ue(t){return z({...t,method:"DELETE"})}function Ye(t){return z({...t,method:"PUT"})}var k="Dialog",[W,Nt]=Fe(k),[He,f]=W(k),q=t=>{const{__scopeDialog:o,children:s,open:r,defaultOpen:a,onOpenChange:n,modal:c=!0}=t,d=l.useRef(null),u=l.useRef(null),[g=!1,p]=xe({prop:r,defaultProp:a,onChange:n});return e.jsx(He,{scope:o,triggerRef:d,contentRef:u,contentId:C(),titleId:C(),descriptionId:C(),open:g,onOpenChange:p,onOpenToggle:l.useCallback(()=>p(b=>!b),[p]),modal:c,children:s})};q.displayName=k;var B="DialogTrigger",Ke=l.forwardRef((t,o)=>{const{__scopeDialog:s,...r}=t,a=f(B,s),n=P(o,a.triggerRef);return e.jsx(y.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":A(a.open),...r,ref:n,onClick:m(t.onClick,a.onOpenToggle)})});Ke.displayName=B;var M="DialogPortal",[Ve,G]=W(M,{forceMount:void 0}),U=t=>{const{__scopeDialog:o,forceMount:s,children:r,container:a}=t,n=f(M,o);return e.jsx(Ve,{scope:o,forceMount:s,children:l.Children.map(r,c=>e.jsx(I,{present:s||n.open,children:e.jsx(he,{asChild:!0,container:a,children:c})}))})};U.displayName=M;var j="DialogOverlay",Y=l.forwardRef((t,o)=>{const s=G(j,t.__scopeDialog),{forceMount:r=s.forceMount,...a}=t,n=f(j,t.__scopeDialog);return n.modal?e.jsx(I,{present:r||n.open,children:e.jsx(Qe,{...a,ref:o})}):null});Y.displayName=j;var Qe=l.forwardRef((t,o)=>{const{__scopeDialog:s,...r}=t,a=f(j,s);return e.jsx(ve,{as:Ae,allowPinchZoom:!0,shards:[a.contentRef],children:e.jsx(y.div,{"data-state":A(a.open),...r,ref:o,style:{pointerEvents:"auto",...r.style}})})}),x="DialogContent",H=l.forwardRef((t,o)=>{const s=G(x,t.__scopeDialog),{forceMount:r=s.forceMount,...a}=t,n=f(x,t.__scopeDialog);return e.jsx(I,{present:r||n.open,children:n.modal?e.jsx(Ze,{...a,ref:o}):e.jsx(Xe,{...a,ref:o})})});H.displayName=x;var Ze=l.forwardRef((t,o)=>{const s=f(x,t.__scopeDialog),r=l.useRef(null),a=P(o,s.contentRef,r);return l.useEffect(()=>{const n=r.current;if(n)return me(n)},[]),e.jsx(K,{...t,ref:a,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:m(t.onCloseAutoFocus,n=>{var c;n.preventDefault(),(c=s.triggerRef.current)==null||c.focus()}),onPointerDownOutside:m(t.onPointerDownOutside,n=>{const c=n.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0;(c.button===2||d)&&n.preventDefault()}),onFocusOutside:m(t.onFocusOutside,n=>n.preventDefault())})}),Xe=l.forwardRef((t,o)=>{const s=f(x,t.__scopeDialog),r=l.useRef(!1),a=l.useRef(!1);return e.jsx(K,{...t,ref:o,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:n=>{var c,d;(c=t.onCloseAutoFocus)==null||c.call(t,n),n.defaultPrevented||(r.current||(d=s.triggerRef.current)==null||d.focus(),n.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:n=>{var u,g;(u=t.onInteractOutside)==null||u.call(t,n),n.defaultPrevented||(r.current=!0,n.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const c=n.target;((g=s.triggerRef.current)==null?void 0:g.contains(c))&&n.preventDefault(),n.detail.originalEvent.type==="focusin"&&a.current&&n.preventDefault()}})}),K=l.forwardRef((t,o)=>{const{__scopeDialog:s,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:n,...c}=t,d=f(x,s),u=l.useRef(null),g=P(o,u);return ye(),e.jsxs(e.Fragment,{children:[e.jsx(je,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:n,children:e.jsx(De,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":A(d.open),...c,ref:g,onDismiss:()=>d.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(Je,{titleId:d.titleId}),e.jsx(tt,{contentRef:u,descriptionId:d.descriptionId})]})]})}),O="DialogTitle",V=l.forwardRef((t,o)=>{const{__scopeDialog:s,...r}=t,a=f(O,s);return e.jsx(y.h2,{id:a.titleId,...r,ref:o})});V.displayName=O;var Q="DialogDescription",Z=l.forwardRef((t,o)=>{const{__scopeDialog:s,...r}=t,a=f(Q,s);return e.jsx(y.p,{id:a.descriptionId,...r,ref:o})});Z.displayName=Q;var X="DialogClose",J=l.forwardRef((t,o)=>{const{__scopeDialog:s,...r}=t,a=f(X,s);return e.jsx(y.button,{type:"button",...r,ref:o,onClick:m(t.onClick,()=>a.onOpenChange(!1))})});J.displayName=X;function A(t){return t?"open":"closed"}var ee="DialogTitleWarning",[Et,te]=Le(ee,{contentName:x,titleName:O,docsSlug:"dialog"}),Je=({titleId:t})=>{const o=te(ee),s=`\`${o.contentName}\` requires a \`${o.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${o.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${o.docsSlug}`;return l.useEffect(()=>{t&&(document.getElementById(t)||console.error(s))},[s,t]),null},et="DialogDescriptionWarning",tt=({contentRef:t,descriptionId:o})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${te(et).contentName}}.`;return l.useEffect(()=>{var n;const a=(n=t.current)==null?void 0:n.getAttribute("aria-describedby");o&&a&&(document.getElementById(o)||console.warn(r))},[r,t,o]),null},ot=q,st=U,nt=Y,at=H,rt=V,it=Z,lt=J;function oe({...t}){return e.jsx(ot,{"data-slot":"dialog",...t})}function ct({...t}){return e.jsx(st,{"data-slot":"dialog-portal",...t})}function dt({className:t,...o}){return e.jsx(nt,{"data-slot":"dialog-overlay",className:h("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...o})}function se({className:t,children:o,...s}){return e.jsxs(ct,{"data-slot":"dialog-portal",children:[e.jsx(dt,{}),e.jsxs(at,{"data-slot":"dialog-content",className:h("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...s,children:[o,e.jsxs(lt,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(Ge,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function ne({className:t,...o}){return e.jsx("div",{"data-slot":"dialog-header",className:h("flex flex-col gap-2 text-center sm:text-left",t),...o})}function ae({className:t,...o}){return e.jsx("div",{"data-slot":"dialog-footer",className:h("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...o})}function re({className:t,...o}){return e.jsx(rt,{"data-slot":"dialog-title",className:h("text-lg leading-none font-semibold",t),...o})}function ie({className:t,...o}){return e.jsx(it,{"data-slot":"dialog-description",className:h("text-muted-foreground text-sm",t),...o})}const ut=({isOpen:t,onClose:o,onDelete:s,title:r,loading:a})=>e.jsx(oe,{open:t,onOpenChange:o,children:e.jsxs(se,{children:[e.jsxs(ne,{children:[e.jsx(re,{children:"Are you absolutely sure?"}),e.jsxs(ie,{children:["This action cannot be undone. This will permanently delete ",r,"and remove data from our servers."]})]}),e.jsxs(ae,{children:[e.jsx(v,{type:"submit",variant:"destructive",onClick:s,disabled:a,children:"Yes"}),e.jsx(v,{type:"reset",onClick:o,variant:"default",children:"No"})]})]})});function pt({className:t,...o}){return e.jsx("textarea",{"data-slot":"textarea",className:h("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...o})}const ft=Pe().shape({title:E().required("Title is required").min(3,"Title must be at least 3 characters").max(100,"Title must be less than 100 characters"),description:E().max(500,"Description must be less than 500 characters"),youtubeLink:E().required("YouTube URL is required").matches(/^(https?:\/\/)?(www\.)?(youtube\.com\/watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})$/,"Must be a valid YouTube URL")}),gt=({isOpen:t,onClose:o,content:s,onSubmit:r,loading:a})=>e.jsx(oe,{open:t,onOpenChange:o,children:e.jsxs(se,{className:"sm:max-w-[500px]",children:[e.jsxs(ne,{children:[e.jsx(re,{children:"Edit Content"}),e.jsx(ie,{children:"Update the content details below and save changes."})]}),e.jsx(ke,{initialValues:{title:(s==null?void 0:s.title)||"",description:(s==null?void 0:s.description)||"",youtubeLink:(s==null?void 0:s.youtubeLink)||""},validationSchema:ft,onSubmit:r,children:()=>e.jsxs(Me,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"title",children:"Title"}),e.jsx(w,{as:$,id:"title",name:"title",placeholder:"Title"}),e.jsx(R,{name:"title",component:"div",className:"text-sm text-destructive"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"description",children:"Description"}),e.jsx(w,{as:pt,id:"description",name:"description",placeholder:"Describe your content",rows:4}),e.jsx(R,{name:"description",component:"div",className:"text-sm text-destructive"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"youtubeLink",children:"YouTube URL"}),e.jsx(w,{as:$,id:"youtubeLink",name:"youtubeLink",placeholder:"https://youtube.com/watch?v=..."}),e.jsx(R,{name:"youtubeLink",component:"div",className:"text-sm text-destructive"})]}),e.jsx(ae,{children:e.jsx(v,{type:"submit",disabled:a,children:a?"Updating...":"Save Changes"})})]})})]})});function _t({userId:t,isOwner:o=!1}){const[s,r]=l.useState(null),[a,n]=l.useState(!1),[c,d]=l.useState(!1),[u,g]=l.useState(null),{data:p,isLoading:b}=Oe({url:N.contentsByUserId(t),options:{queryKey:[T.getContents],enabled:!!t}}),{mutate:le,isPending:ce}=Ue({url:N.contentById(s),options:{onSuccess:()=>{S.success("Content deleted successfully"),L.invalidateQueries({queryKey:[T.getContents]}),n(!1)}}}),{mutate:de,isPending:ue}=Ye({url:p?N.contentById(u==null?void 0:u.id):"",options:{onSuccess:()=>{S.success("Content updated successfully"),L.invalidateQueries({queryKey:[T.getContents]}),d(!1)},onError:Ce}}),pe=i=>{r(i),n(!0)},fe=i=>{d(!0),g(i)},ge=i=>{p&&de(i)};return b?e.jsx("div",{children:"Loading content..."}):(p==null?void 0:p.length)===0?e.jsxs("div",{className:"text-center py-10",children:[e.jsx("p",{className:"text-muted-foreground",children:"No content found"}),o&&e.jsx("p",{className:"mt-2",children:'Add your first content by clicking on the "Add Content" tab.'})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 gap-6",children:p&&p.map(i=>{var F;return e.jsxs(Ne,{children:[e.jsxs(Ee,{children:[e.jsx(_e,{children:i==null?void 0:i.title}),e.jsxs(we,{children:["Added on ",be(i==null?void 0:i.createdAt).format("DD/MM/YYYY")]}),o&&e.jsx(Re,{children:e.jsx(v,{variant:"outline",size:"sm",className:"cursor-pointer",onClick:()=>fe(i),children:e.jsx(ze,{className:"h-4 w-4"})})})]}),e.jsxs(Te,{children:[(i==null?void 0:i.description)&&e.jsx("p",{className:"mb-4 text-muted-foreground",children:i==null?void 0:i.description}),e.jsx("div",{className:"aspect-video w-full overflow-hidden rounded-md",children:e.jsx("iframe",{width:"100%",height:"100%",src:"https://www.youtube.com/embed/"+((F=i==null?void 0:i.youtubeLink)==null?void 0:F.split("=")[1]),title:i==null?void 0:i.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]}),o&&e.jsx(Ie,{className:"flex justify-end",children:e.jsxs(v,{variant:"destructive",size:"sm",onClick:()=>pe(i.id),className:"cursor-pointer",children:[e.jsx(qe,{className:"h-4 w-4 mr-2"}),"Delete"]})})]},i.id)})}),e.jsx(ut,{isOpen:a,onClose:()=>n(!1),onDelete:()=>le({}),title:"Content",loading:ce}),e.jsx(gt,{isOpen:c,onClose:()=>d(!1),content:u,onSubmit:ge,loading:ue})]})}export{Ct as A,_t as C,pt as T,ft as a,Ye as u};
